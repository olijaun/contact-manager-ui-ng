<div class="container">

  <h2>{{ member.lastNameOrCompanyName | uppercase }}, {{ member.firstName |
    uppercase
    }}</h2>
  <p>
    <mat-label>Id: {{member.id}}</mat-label>
  </p>
  <form> <!-- (ngSubmit)="onSubmit()" #basicForm="ngForm"-->
    <mat-card class="example-container">

      <mat-card-title>Person data</mat-card-title>

      <mat-card-content class="example-container">

        <mat-form-field appearance="standard">
          <mat-label>First name</mat-label>
          <input name="firstName" [(ngModel)]="member.firstName" matInput placeholder="">
        </mat-form-field>

        <mat-form-field appearance="standard">
          <mat-label>Last name</mat-label>
          <input name="lastName" [(ngModel)]="member.lastNameOrCompanyName" matInput placeholder="" required>
        </mat-form-field>

        <mat-form-field appearance="standard">
          <mat-label>Address</mat-label>
          <input name="address" [(ngModel)]="member.address" matInput placeholder="" required>
        </mat-form-field>

      </mat-card-content>

      <mat-card-actions>
        <button mat-button (click)="editPersonClicked()">Edit Person</button>
      </mat-card-actions>
    </mat-card>

    <mat-card class="example-container">

      <mat-card-title>Subscriptions</mat-card-title>

      <mat-card-content class="example-container">

        <mat-form-field appearance="standard">
          <mat-label>Subscription Period</mat-label>
          <mat-select name="subscriptionPeriod" [(ngModel)]="selectedPeriod">
            <mat-option *ngFor="let subscriptionPeriod of subscriptionPeriods.subscriptionPeriods" [value]="subscriptionPeriod">
              {{ subscriptionPeriod.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="standard">
          <mat-label>Subscription Type</mat-label>
          <mat-select name="subscriptionType" [(ngModel)]="selectedSubscriptionType">
            <mat-option *ngFor="let subscriptionType of selectedPeriod.subscriptionTypes" [value]="subscriptionType">
              {{ subscriptionType.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <button mat-raised-button (click)="addSubscription()">add</button>

      </mat-card-content>


      <table mat-table [dataSource]="member.subscriptions" class="mat-elevation-z8">

        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef>Id</th>
          <td mat-cell *matCellDef="let element">{{element.id}}</td>
        </ng-container>

        <ng-container matColumnDef="subscriptionPeriodId">
          <th mat-header-cell *matHeaderCellDef>Subscription Period</th>
          <td mat-cell *matCellDef="let element">{{ subscriptionPeriodNameById(element.subscriptionPeriodId) }}</td>
        </ng-container>

        <ng-container matColumnDef="subscriptionTypeId">
          <th mat-header-cell *matHeaderCellDef>Subscription Type</th>
          <td mat-cell *matCellDef="let element">{{ subscriptionTypeNameById(element) }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="rowClicked(row)"></tr>
      </table>

    </mat-card>
  </form>

  <p></p>

  <p></p>
  <!--<button mat-raised-button (click)="goBack()">go back</button>-->
  <button mat-raised-button (click)="save()">save</button>
</div>
